{"ast":null,"code":"var _jsxFileName = \"/Users/sminem/Documents/GitHub/poorRugMigration/src/contexts/Transactions/TransactionsProvider.tsx\";\nimport React, { useCallback, useEffect, useReducer } from 'react';\nimport Context from './context';\nimport reducer, { initialState, setTransactions, addTransaction } from './reducer';\n\nconst TransactionsProvider = ({\n  children\n}) => {\n  const [{\n    initialized,\n    transactions\n  }, dispatch] = useReducer(reducer, initialState);\n  const handleAddTransaction = useCallback(tx => {\n    dispatch(addTransaction(tx));\n  }, [dispatch]);\n  const fetchTransactions = useCallback(async () => {\n    try {\n      const txsRaw = localStorage.getItem('transactions');\n      const txs = JSON.parse(txsRaw) || {};\n      dispatch(setTransactions(txs));\n    } catch (e) {\n      console.log(e);\n    }\n  }, [dispatch]);\n  useEffect(() => {\n    if (initialized) {\n      localStorage.setItem('transactions', JSON.stringify(transactions));\n    }\n  }, [initialized, transactions]);\n  useEffect(() => {\n    fetchTransactions();\n  }, [fetchTransactions]);\n  return /*#__PURE__*/React.createElement(Context.Provider, {\n    value: {\n      transactions,\n      onAddTransaction: handleAddTransaction\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nexport default TransactionsProvider;","map":{"version":3,"sources":["/Users/sminem/Documents/GitHub/poorRugMigration/src/contexts/Transactions/TransactionsProvider.tsx"],"names":["React","useCallback","useEffect","useReducer","Context","reducer","initialState","setTransactions","addTransaction","TransactionsProvider","children","initialized","transactions","dispatch","handleAddTransaction","tx","fetchTransactions","txsRaw","localStorage","getItem","txs","JSON","parse","e","console","log","setItem","stringify","onAddTransaction"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,UAAxC,QAA0D,OAA1D;AAEA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,IACEC,YADF,EAEEC,eAFF,EAGEC,cAHF,QAIO,WAJP;;AAOA,MAAMC,oBAA8B,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AACvD,QAAM,CAAC;AAAEC,IAAAA,WAAF;AAAeC,IAAAA;AAAf,GAAD,EAAgCC,QAAhC,IAA4CV,UAAU,CAACE,OAAD,EAAUC,YAAV,CAA5D;AAEA,QAAMQ,oBAAoB,GAAGb,WAAW,CAAEc,EAAD,IAAqB;AAC5DF,IAAAA,QAAQ,CAACL,cAAc,CAACO,EAAD,CAAf,CAAR;AACD,GAFuC,EAErC,CAACF,QAAD,CAFqC,CAAxC;AAIA,QAAMG,iBAAiB,GAAGf,WAAW,CAAC,YAAY;AAChD,QAAI;AACF,YAAMgB,MAAM,GAAGC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAf;AACA,YAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWL,MAAX,KAAyC,EAArD;AACAJ,MAAAA,QAAQ,CAACN,eAAe,CAACa,GAAD,CAAhB,CAAR;AACD,KAJD,CAIE,OAAOG,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD;AACF,GARoC,EAQlC,CAACV,QAAD,CARkC,CAArC;AAUAX,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIS,WAAJ,EAAiB;AACfO,MAAAA,YAAY,CAACQ,OAAb,CAAqB,cAArB,EAAqCL,IAAI,CAACM,SAAL,CAAef,YAAf,CAArC;AACD;AACF,GAJQ,EAIN,CAACD,WAAD,EAAcC,YAAd,CAJM,CAAT;AAMAV,EAAAA,SAAS,CAAC,MAAM;AACdc,IAAAA,iBAAiB;AAClB,GAFQ,EAEN,CAACA,iBAAD,CAFM,CAAT;AAIA,sBACE,oBAAC,OAAD,CAAS,QAAT;AAAkB,IAAA,KAAK,EAAE;AACvBJ,MAAAA,YADuB;AAEvBgB,MAAAA,gBAAgB,EAAEd;AAFK,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIGJ,QAJH,CADF;AAQD,CAnCD;;AAqCA,eAAeD,oBAAf","sourcesContent":["import React, { useCallback, useEffect, useReducer } from 'react'\n\nimport Context from './context'\nimport reducer, {\n  initialState,\n  setTransactions,\n  addTransaction,\n} from './reducer'\nimport { Transaction, TransactionsMap } from './types'\n\nconst TransactionsProvider: React.FC = ({ children }) => {\n  const [{ initialized, transactions }, dispatch] = useReducer(reducer, initialState)\n\n  const handleAddTransaction = useCallback((tx: Transaction) => {\n    dispatch(addTransaction(tx))\n  }, [dispatch])\n\n  const fetchTransactions = useCallback(async () => {\n    try {\n      const txsRaw = localStorage.getItem('transactions')\n      const txs = JSON.parse(txsRaw) as TransactionsMap || {}\n      dispatch(setTransactions(txs))\n    } catch (e) {\n      console.log(e)\n    }\n  }, [dispatch])\n\n  useEffect(() => {\n    if (initialized) {\n      localStorage.setItem('transactions', JSON.stringify(transactions))\n    }\n  }, [initialized, transactions])\n\n  useEffect(() => {\n    fetchTransactions()\n  }, [fetchTransactions])\n\n  return (\n    <Context.Provider value={{\n      transactions,\n      onAddTransaction: handleAddTransaction,\n    }}>\n      {children}\n    </Context.Provider>\n  )\n}\n\nexport default TransactionsProvider"]},"metadata":{},"sourceType":"module"}