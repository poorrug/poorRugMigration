{"ast":null,"code":"var _jsxFileName = \"/Users/sminem/Documents/GitHub/poorRugMigration/src/views/Farm/components/Stake.tsx\";\nimport React, { useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport Button from '../../../components/Button';\nimport Card from '../../../components/Card';\nimport CardContent from '../../../components/CardContent';\nimport CardIcon from '../../../components/CardIcon';\nimport { AddIcon } from '../../../components/icons';\nimport IconButton from '../../../components/IconButton';\nimport Label from '../../../components/Label';\nimport Value from '../../../components/Value';\nimport useAllowance from '../../../hooks/useAllowance';\nimport useApprove from '../../../hooks/useApprove';\nimport useModal from '../../../hooks/useModal';\nimport useStake from '../../../hooks/useStake';\nimport useStakedBalance from '../../../hooks/useStakedBalance';\nimport useTokenBalance from '../../../hooks/useTokenBalance';\nimport useUnstake from '../../../hooks/useUnstake';\nimport { getDisplayBalance } from '../../../utils/formatBalance';\nimport DepositModal from './DepositModal';\nimport WithdrawModal from './WithdrawModal';\n\nconst Stake = ({\n  poolContract,\n  tokenContract,\n  tokenName\n}) => {\n  const [requestedApproval, setRequestedApproval] = useState(false);\n  const allowance = useAllowance(tokenContract, poolContract);\n  const {\n    onApprove\n  } = useApprove(tokenContract, poolContract);\n  const tokenBalance = useTokenBalance(tokenContract.options.address);\n  const stakedBalance = useStakedBalance(poolContract);\n  const {\n    onStake\n  } = useStake(poolContract, tokenName);\n  const {\n    onUnstake\n  } = useUnstake(poolContract);\n  const [onPresentDeposit] = useModal( /*#__PURE__*/React.createElement(DepositModal, {\n    max: tokenBalance,\n    onConfirm: onStake,\n    tokenName: tokenName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }));\n  const [onPresentWithdraw] = useModal( /*#__PURE__*/React.createElement(WithdrawModal, {\n    max: stakedBalance,\n    onConfirm: onUnstake,\n    tokenName: tokenName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }));\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true);\n      const txHash = await onApprove(); // user rejected tx or didn't go thru\n\n      if (!txHash) {\n        setRequestedApproval(false);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }, [onApprove, setRequestedApproval]);\n  return /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(StyledCardContentInner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(StyledCardHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"\\uD83C\\uDF31\"), /*#__PURE__*/React.createElement(Value, {\n    value: getDisplayBalance(stakedBalance),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    text: `${tokenName} Staked`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(StyledCardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, !allowance.toNumber() ? /*#__PURE__*/React.createElement(Button, {\n    disabled: requestedApproval,\n    onClick: handleApprove,\n    text: `Approve ${tokenName}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    text: \"Unstake\",\n    onClick: onPresentWithdraw,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(StyledActionSpacer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }), false && /*#__PURE__*/React.createElement(IconButton, {\n    onClick: onPresentDeposit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  })))))));\n};\n\nconst StyledCardHeader = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n`;\nconst StyledCardActions = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: ${props => props.theme.spacing[6]}px;\n  width: 100%;\n`;\nconst StyledActionSpacer = styled.div`\n  height: ${props => props.theme.spacing[4]}px;\n  width: ${props => props.theme.spacing[4]}px;\n`;\nconst StyledCardContentInner = styled.div`\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nexport default Stake;","map":{"version":3,"sources":["/Users/sminem/Documents/GitHub/poorRugMigration/src/views/Farm/components/Stake.tsx"],"names":["React","useCallback","useState","styled","Button","Card","CardContent","CardIcon","AddIcon","IconButton","Label","Value","useAllowance","useApprove","useModal","useStake","useStakedBalance","useTokenBalance","useUnstake","getDisplayBalance","DepositModal","WithdrawModal","Stake","poolContract","tokenContract","tokenName","requestedApproval","setRequestedApproval","allowance","onApprove","tokenBalance","options","address","stakedBalance","onStake","onUnstake","onPresentDeposit","onPresentWithdraw","handleApprove","txHash","e","console","log","toNumber","StyledCardHeader","div","StyledCardActions","props","theme","spacing","StyledActionSpacer","StyledCardContentInner"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { Contract } from 'web3-eth-contract'\n\nimport Button from '../../../components/Button'\nimport Card from '../../../components/Card'\nimport CardContent from '../../../components/CardContent'\nimport CardIcon from '../../../components/CardIcon'\nimport { AddIcon, RemoveIcon } from '../../../components/icons'\nimport IconButton from '../../../components/IconButton'\nimport Label from '../../../components/Label'\nimport Value from '../../../components/Value'\n\nimport useAllowance from '../../../hooks/useAllowance'\nimport useApprove from '../../../hooks/useApprove'\nimport useModal from '../../../hooks/useModal'\nimport useStake from '../../../hooks/useStake'\nimport useStakedBalance from '../../../hooks/useStakedBalance'\nimport useTokenBalance from '../../../hooks/useTokenBalance'\nimport useUnstake from '../../../hooks/useUnstake'\n\nimport { getDisplayBalance } from '../../../utils/formatBalance'\n\nimport DepositModal from './DepositModal'\nimport WithdrawModal from './WithdrawModal'\n\ninterface StakeProps {\n  poolContract: Contract,\n  tokenContract: Contract,\n  tokenName: string\n}\n\nconst Stake: React.FC<StakeProps> = ({\n  poolContract,\n  tokenContract,\n  tokenName,\n}) => {\n\n  const [requestedApproval, setRequestedApproval] = useState(false)\n\n  const allowance = useAllowance(tokenContract, poolContract)\n  const { onApprove } = useApprove(tokenContract, poolContract)\n\n  const tokenBalance = useTokenBalance(tokenContract.options.address)\n  const stakedBalance = useStakedBalance(poolContract)\n\n  const { onStake } = useStake(poolContract, tokenName);\n  const { onUnstake } = useUnstake(poolContract)\n\n  const [onPresentDeposit] = useModal(\n    <DepositModal\n      max={tokenBalance}\n      onConfirm={onStake}\n      tokenName={tokenName}\n    />\n  )\n\n  const [onPresentWithdraw] = useModal(\n    <WithdrawModal\n      max={stakedBalance}\n      onConfirm={onUnstake}\n      tokenName={tokenName}\n    />\n  )\n\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true)\n      const txHash = await onApprove()\n      // user rejected tx or didn't go thru\n      if (!txHash) {\n        setRequestedApproval(false)\n      }\n    } catch (e) {\n      console.log(e)\n    }\n  }, [onApprove, setRequestedApproval])\n\n  return (\n    <Card>\n      <CardContent>\n        <StyledCardContentInner>\n          <StyledCardHeader>\n            <CardIcon>🌱</CardIcon>\n            <Value value={getDisplayBalance(stakedBalance)} />\n            <Label text={`${tokenName} Staked`} />\n          </StyledCardHeader>\n          <StyledCardActions>\n            {!allowance.toNumber() ? (\n              <Button\n                disabled={requestedApproval}\n                onClick={handleApprove}\n                text={`Approve ${tokenName}`}\n              />\n            ) : (\n              <>\n                <Button text=\"Unstake\" onClick={onPresentWithdraw} />\n                <StyledActionSpacer />\n                {false && (\n                  <IconButton onClick={onPresentDeposit}>\n                    <AddIcon />\n                  </IconButton>\n                )}\n              </>\n            )}\n          </StyledCardActions>\n        </StyledCardContentInner>\n      </CardContent>\n    </Card>\n  )\n}\n\nconst StyledCardHeader = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n`\nconst StyledCardActions = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: ${props => props.theme.spacing[6]}px;\n  width: 100%;\n`\n\nconst StyledActionSpacer = styled.div`\n  height: ${props => props.theme.spacing[4]}px;\n  width: ${props => props.theme.spacing[4]}px;\n`\n\nconst StyledCardContentInner = styled.div`\n  align-items: center;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n`\n\nexport default Stake\n"]},"metadata":{},"sourceType":"module"}